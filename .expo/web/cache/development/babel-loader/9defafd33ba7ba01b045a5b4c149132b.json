{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"data\", \"style\", \"containerWidth\", \"itemWidth\", \"itemContainerStyle\", \"separatorWidth\", \"minScrollDistance\", \"inActiveScale\", \"inActiveOpacity\", \"inverted\", \"initialIndex\", \"bounces\", \"showsHorizontalScrollIndicator\", \"keyExtractor\", \"renderItem\", \"onScrollEnd\", \"onScrollBeginDrag\", \"onScrollEndDrag\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { Component, useEffect, useImperativeHandle, useRef, useState, forwardRef } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar _Dimensions$get = Dimensions.get('window'),\n    windowWidth = _Dimensions$get.width;\n\nvar styles = StyleSheet.create({\n  container: {},\n  itemContainer: {\n    justifyContent: 'center'\n  }\n});\nvar AnimatedFlatList = Animated.createAnimatedComponent(FlatList);\n\nfunction useConstructor() {\n  var callBack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasBeenCalled = _useState2[0],\n      setHasBeenCalled = _useState2[1];\n\n  if (hasBeenCalled) {\n    return;\n  }\n\n  callBack();\n  setHasBeenCalled(true);\n}\n\nfunction Carousel(props, ref) {\n  var _props$data = props.data,\n      data = _props$data === void 0 ? [] : _props$data,\n      _props$style = props.style,\n      style = _props$style === void 0 ? {} : _props$style,\n      _props$containerWidth = props.containerWidth,\n      containerWidth = _props$containerWidth === void 0 ? windowWidth : _props$containerWidth,\n      _props$itemWidth = props.itemWidth,\n      itemWidth = _props$itemWidth === void 0 ? 0.9 * windowWidth : _props$itemWidth,\n      _props$itemContainerS = props.itemContainerStyle,\n      itemContainerStyle = _props$itemContainerS === void 0 ? {} : _props$itemContainerS,\n      _props$separatorWidth = props.separatorWidth,\n      separatorWidth = _props$separatorWidth === void 0 ? 10 : _props$separatorWidth,\n      _props$minScrollDista = props.minScrollDistance,\n      minScrollDistance = _props$minScrollDista === void 0 ? 5 : _props$minScrollDista,\n      _props$inActiveScale = props.inActiveScale,\n      inActiveScale = _props$inActiveScale === void 0 ? 0.8 : _props$inActiveScale,\n      _props$inActiveOpacit = props.inActiveOpacity,\n      inActiveOpacity = _props$inActiveOpacit === void 0 ? 0.8 : _props$inActiveOpacit,\n      _props$inverted = props.inverted,\n      inverted = _props$inverted === void 0 ? false : _props$inverted,\n      _props$initialIndex = props.initialIndex,\n      initialIndex = _props$initialIndex === void 0 ? 0 : _props$initialIndex,\n      _props$bounces = props.bounces,\n      bounces = _props$bounces === void 0 ? true : _props$bounces,\n      _props$showsHorizonta = props.showsHorizontalScrollIndicator,\n      showsHorizontalScrollIndicator = _props$showsHorizonta === void 0 ? false : _props$showsHorizonta,\n      _props$keyExtractor = props.keyExtractor,\n      keyExtractor = _props$keyExtractor === void 0 ? function (item, index) {\n    return index.toString();\n  } : _props$keyExtractor,\n      _props$renderItem = props.renderItem,\n      renderItem = _props$renderItem === void 0 ? function () {} : _props$renderItem,\n      _props$onScrollEnd = props.onScrollEnd,\n      onScrollEnd = _props$onScrollEnd === void 0 ? function () {} : _props$onScrollEnd,\n      _props$onScrollBeginD = props.onScrollBeginDrag,\n      onScrollBeginDrag = _props$onScrollBeginD === void 0 ? function () {} : _props$onScrollBeginD,\n      _props$onScrollEndDra = props.onScrollEndDrag,\n      onScrollEndDrag = _props$onScrollEndDra === void 0 ? function () {} : _props$onScrollEndDra,\n      otherProps = _objectWithoutProperties(props, _excluded);\n\n  var scrollViewRef = useRef(null);\n  var currentIndexRef = useRef(initialIndex);\n  var scrollXRef = useRef(0);\n  var scrollXBeginRef = useRef(0);\n  var xOffsetRef = useRef(new Animated.Value(0));\n  var handleOnScrollRef = useRef(function () {});\n  var halfContainerWidth = containerWidth / 2;\n  var halfItemWidth = itemWidth / 2;\n  var itemTotalMarginBothSide = getItemTotalMarginBothSide();\n  var containerStyle = [styles.container, {\n    width: containerWidth\n  }, style];\n  var dataLength = data ? data.length : 0;\n  useConstructor(function () {\n    setScrollHandler();\n  });\n  useImperativeHandle(ref, function () {\n    return {\n      scrollToIndex: scrollToIndex\n    };\n  });\n\n  function isLastItem(index) {\n    return index === dataLength - 1;\n  }\n\n  function isFirstItem(index) {\n    return index === 0;\n  }\n\n  function getItemLayout(data, index) {\n    return {\n      offset: getItemOffset(index),\n      length: itemWidth,\n      index: index\n    };\n  }\n\n  function setScrollHandler() {\n    handleOnScrollRef.current = Animated.event([{\n      nativeEvent: {\n        contentOffset: {\n          x: xOffsetRef.current\n        }\n      }\n    }], {\n      useNativeDriver: true,\n      listener: function listener(event) {\n        scrollXRef.current = event.nativeEvent.contentOffset.x;\n      }\n    });\n  }\n\n  function scrollToIndex(index) {\n    if (index < 0 || index >= dataLength) {\n      return;\n    }\n\n    onScrollEnd && onScrollEnd(data[index], index);\n    currentIndexRef.current = index;\n    setTimeout(function () {\n      scrollViewRef.current && scrollViewRef.current.scrollToOffset({\n        offset: getItemOffset(index),\n        animated: true\n      });\n    });\n  }\n\n  function handleOnScrollBeginDrag() {\n    onScrollBeginDrag && onScrollBeginDrag();\n    scrollXBeginRef.current = scrollXRef.current;\n  }\n\n  function handleOnScrollEndDrag() {\n    onScrollEndDrag && onScrollEndDrag();\n\n    if (scrollXRef.current < 0) {\n      return;\n    }\n\n    var scrollDistance = scrollXRef.current - scrollXBeginRef.current;\n    scrollXBeginRef.current = 0;\n\n    if (Math.abs(scrollDistance) < minScrollDistance) {\n      scrollToIndex(currentIndexRef.current);\n      return;\n    }\n\n    if (scrollDistance < 0) {\n      scrollToIndex(currentIndexRef.current - 1);\n    } else {\n      scrollToIndex(currentIndexRef.current + 1);\n    }\n  }\n\n  function getItemTotalMarginBothSide() {\n    var compensatorOfSeparatorByScaleEffect = (1 - inActiveScale) * itemWidth;\n    return separatorWidth - compensatorOfSeparatorByScaleEffect / 2;\n  }\n\n  function getItemOffset(index) {\n    return index * (itemWidth + itemTotalMarginBothSide) - (halfContainerWidth - halfItemWidth);\n  }\n\n  function getAnimatedOffset(index) {\n    if (isFirstItem(index)) {\n      return halfItemWidth;\n    }\n\n    if (isLastItem(index)) {\n      return containerWidth - halfItemWidth;\n    }\n\n    return halfContainerWidth;\n  }\n\n  function getMidPontInterpolate(index, animatedOffset) {\n    return index * (itemWidth + itemTotalMarginBothSide) + halfItemWidth - animatedOffset;\n  }\n\n  function getStartPontInterpolate(index, midPoint) {\n    if (index === 1) {\n      return 0;\n    }\n\n    if (isLastItem(index)) {\n      return (dataLength - 2) * (itemWidth + itemTotalMarginBothSide) + halfItemWidth - halfContainerWidth;\n    }\n\n    return midPoint - itemWidth - itemTotalMarginBothSide;\n  }\n\n  function getEndPointInterpolate(index, midPoint) {\n    if (isFirstItem(index)) {\n      return itemWidth + itemTotalMarginBothSide + halfItemWidth - halfContainerWidth;\n    }\n\n    if (index === dataLength - 2) {\n      return (dataLength - 1) * (itemWidth + itemTotalMarginBothSide) + itemWidth - containerWidth;\n    }\n\n    return midPoint + itemWidth + itemTotalMarginBothSide;\n  }\n\n  function getItemAnimatedStyle(index) {\n    var animatedOffset = getAnimatedOffset(index);\n    var midPoint = getMidPontInterpolate(index, animatedOffset);\n    var startPoint = getStartPontInterpolate(index, midPoint);\n    var endPoint = getEndPointInterpolate(index, midPoint);\n    var animatedOpacity = {\n      opacity: xOffsetRef.current.interpolate({\n        inputRange: [startPoint, midPoint, endPoint],\n        outputRange: [inActiveOpacity, 1, inActiveOpacity]\n      })\n    };\n    var animatedScale = {\n      transform: [{\n        scale: xOffsetRef.current.interpolate({\n          inputRange: [startPoint, midPoint, endPoint],\n          outputRange: [inActiveScale, 1, inActiveScale]\n        })\n      }]\n    };\n    return _objectSpread(_objectSpread({}, animatedOpacity), animatedScale);\n  }\n\n  function getItemMarginStyle(index) {\n    var marginSingleItemSide = itemTotalMarginBothSide / 2;\n\n    if (isFirstItem(index)) {\n      return !!inverted ? {\n        marginLeft: marginSingleItemSide\n      } : {\n        marginRight: marginSingleItemSide\n      };\n    }\n\n    if (isLastItem(index)) {\n      return !!inverted ? {\n        marginRight: marginSingleItemSide\n      } : {\n        marginLeft: marginSingleItemSide\n      };\n    }\n\n    return {\n      marginHorizontal: marginSingleItemSide\n    };\n  }\n\n  function renderItemContainer(_ref) {\n    var item = _ref.item,\n        index = _ref.index;\n    return _jsx(Animated.View, {\n      pointerEvents: 'box-none',\n      style: [styles.itemContainer, itemContainerStyle, {\n        width: itemWidth\n      }, getItemMarginStyle(index), getItemAnimatedStyle(index)],\n      children: renderItem({\n        item: item,\n        index: index\n      })\n    });\n  }\n\n  return _jsx(AnimatedFlatList, _objectSpread(_objectSpread({}, otherProps), {}, {\n    ref: scrollViewRef,\n    data: data,\n    style: containerStyle,\n    horizontal: true,\n    inverted: inverted,\n    bounces: bounces,\n    decelerationRate: 0,\n    initialScrollIndex: initialIndex,\n    automaticallyAdjustContentInsets: false,\n    showsHorizontalScrollIndicator: showsHorizontalScrollIndicator,\n    onScroll: handleOnScrollRef.current,\n    keyExtractor: keyExtractor,\n    getItemLayout: getItemLayout,\n    renderItem: renderItemContainer,\n    onScrollBeginDrag: handleOnScrollBeginDrag,\n    onScrollEndDrag: handleOnScrollEndDrag\n  }));\n}\n\nexport default forwardRef(Carousel);","map":{"version":3,"sources":["/Users/ashwininagaraj/MoviesInventory/node_modules/react-native-anchor-carousel/src/carousel.js"],"names":["React","Component","useEffect","useImperativeHandle","useRef","useState","forwardRef","Dimensions","get","windowWidth","width","styles","StyleSheet","create","container","itemContainer","justifyContent","AnimatedFlatList","Animated","createAnimatedComponent","FlatList","useConstructor","callBack","hasBeenCalled","setHasBeenCalled","Carousel","props","ref","data","style","containerWidth","itemWidth","itemContainerStyle","separatorWidth","minScrollDistance","inActiveScale","inActiveOpacity","inverted","initialIndex","bounces","showsHorizontalScrollIndicator","keyExtractor","item","index","toString","renderItem","onScrollEnd","onScrollBeginDrag","onScrollEndDrag","otherProps","scrollViewRef","currentIndexRef","scrollXRef","scrollXBeginRef","xOffsetRef","Value","handleOnScrollRef","halfContainerWidth","halfItemWidth","itemTotalMarginBothSide","getItemTotalMarginBothSide","containerStyle","dataLength","length","setScrollHandler","scrollToIndex","isLastItem","isFirstItem","getItemLayout","offset","getItemOffset","current","event","nativeEvent","contentOffset","x","useNativeDriver","listener","setTimeout","scrollToOffset","animated","handleOnScrollBeginDrag","handleOnScrollEndDrag","scrollDistance","Math","abs","compensatorOfSeparatorByScaleEffect","getAnimatedOffset","getMidPontInterpolate","animatedOffset","getStartPontInterpolate","midPoint","getEndPointInterpolate","getItemAnimatedStyle","startPoint","endPoint","animatedOpacity","opacity","interpolate","inputRange","outputRange","animatedScale","transform","scale","getItemMarginStyle","marginSingleItemSide","marginLeft","marginRight","marginHorizontal","renderItemContainer"],"mappings":"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","sourcesContent":["import React, {\n  Component,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n  forwardRef\n} from 'react';\nimport { Animated, StyleSheet, Dimensions, FlatList } from 'react-native';\n\nconst { width: windowWidth } = Dimensions.get('window');\n\nconst styles = StyleSheet.create({\n  container: {},\n  itemContainer: { justifyContent: 'center' }\n});\n\nconst AnimatedFlatList = Animated.createAnimatedComponent(FlatList);\n\nfunction useConstructor(callBack = () => {}) {\n  const [hasBeenCalled, setHasBeenCalled] = useState(false);\n  if (hasBeenCalled) {\n    return;\n  }\n  callBack();\n  setHasBeenCalled(true);\n}\n\nfunction Carousel(props, ref) {\n  const {\n    data = [],\n    style = {},\n    containerWidth = windowWidth,\n    itemWidth = 0.9 * windowWidth,\n    itemContainerStyle = {},\n    separatorWidth = 10,\n    minScrollDistance = 5,\n    inActiveScale = 0.8,\n    inActiveOpacity = 0.8,\n    inverted = false,\n    initialIndex = 0,\n    bounces = true,\n    showsHorizontalScrollIndicator = false,\n    keyExtractor = (item, index) => index.toString(),\n    renderItem = () => {},\n    onScrollEnd = () => {},\n    onScrollBeginDrag = () => {},\n    onScrollEndDrag = () => {},\n    ...otherProps\n  } = props;\n  const scrollViewRef = useRef(null);\n  const currentIndexRef = useRef(initialIndex);\n  const scrollXRef = useRef(0);\n  const scrollXBeginRef = useRef(0);\n  const xOffsetRef = useRef(new Animated.Value(0));\n  const handleOnScrollRef = useRef(() => {});\n  const halfContainerWidth = containerWidth / 2;\n  const halfItemWidth = itemWidth / 2;\n  const itemTotalMarginBothSide = getItemTotalMarginBothSide();\n  const containerStyle = [styles.container, { width: containerWidth }, style];\n  const dataLength = data ? data.length : 0;\n\n  useConstructor(() => {\n    setScrollHandler();\n  });\n\n  useImperativeHandle(ref, () => ({\n    scrollToIndex: scrollToIndex\n  }));\n\n  function isLastItem(index) {\n    return index === dataLength - 1;\n  }\n\n  function isFirstItem(index) {\n    return index === 0;\n  }\n\n  function getItemLayout(data, index) {\n    return {\n      offset: getItemOffset(index),\n      length: itemWidth,\n      index\n    };\n  }\n\n  function setScrollHandler() {\n    handleOnScrollRef.current = Animated.event(\n      [{ nativeEvent: { contentOffset: { x: xOffsetRef.current } } }],\n      {\n        useNativeDriver: true,\n        listener: event => {\n          scrollXRef.current = event.nativeEvent.contentOffset.x;\n        }\n      }\n    );\n  }\n\n  function scrollToIndex(index) {\n    if (index < 0 || index >= dataLength) {\n      return;\n    }\n    onScrollEnd && onScrollEnd(data[index], index);\n    currentIndexRef.current = index;\n    setTimeout(() => {\n      scrollViewRef.current &&\n        scrollViewRef.current.scrollToOffset({\n          offset: getItemOffset(index),\n          animated: true\n        });\n    });\n  }\n\n  function handleOnScrollBeginDrag() {\n    onScrollBeginDrag && onScrollBeginDrag();\n    scrollXBeginRef.current = scrollXRef.current;\n  }\n\n  function handleOnScrollEndDrag() {\n    onScrollEndDrag && onScrollEndDrag();\n    if (scrollXRef.current < 0) {\n      return;\n    }\n    const scrollDistance = scrollXRef.current - scrollXBeginRef.current;\n    scrollXBeginRef.current = 0;\n    if (Math.abs(scrollDistance) < minScrollDistance) {\n      scrollToIndex(currentIndexRef.current);\n      return;\n    }\n    if (scrollDistance < 0) {\n      scrollToIndex(currentIndexRef.current - 1);\n    } else {\n      scrollToIndex(currentIndexRef.current + 1);\n    }\n  }\n\n  function getItemTotalMarginBothSide() {\n    const compensatorOfSeparatorByScaleEffect = (1 - inActiveScale) * itemWidth;\n    return separatorWidth - compensatorOfSeparatorByScaleEffect / 2;\n  }\n\n  function getItemOffset(index) {\n    return (\n      index * (itemWidth + itemTotalMarginBothSide) -\n      (halfContainerWidth - halfItemWidth)\n    );\n  }\n\n  function getAnimatedOffset(index) {\n    if (isFirstItem(index)) {\n      return halfItemWidth;\n    }\n    if (isLastItem(index)) {\n      return containerWidth - halfItemWidth;\n    }\n    return halfContainerWidth;\n  }\n\n  function getMidPontInterpolate(index, animatedOffset) {\n    return (\n      index * (itemWidth + itemTotalMarginBothSide) +\n      halfItemWidth -\n      animatedOffset\n    );\n  }\n  function getStartPontInterpolate(index, midPoint) {\n    if (index === 1) {\n      return 0;\n    }\n    if (isLastItem(index)) {\n      return (\n        (dataLength - 2) * (itemWidth + itemTotalMarginBothSide) +\n        halfItemWidth -\n        halfContainerWidth\n      );\n    }\n    return midPoint - itemWidth - itemTotalMarginBothSide;\n  }\n\n  function getEndPointInterpolate(index, midPoint) {\n    if (isFirstItem(index)) {\n      return (\n        itemWidth + itemTotalMarginBothSide + halfItemWidth - halfContainerWidth\n      );\n    }\n    if (index === dataLength - 2) {\n      return (\n        (dataLength - 1) * (itemWidth + itemTotalMarginBothSide) +\n        itemWidth -\n        containerWidth\n      );\n    }\n    return midPoint + itemWidth + itemTotalMarginBothSide;\n  }\n\n  function getItemAnimatedStyle(index) {\n    const animatedOffset = getAnimatedOffset(index);\n    const midPoint = getMidPontInterpolate(index, animatedOffset);\n    const startPoint = getStartPontInterpolate(index, midPoint);\n    const endPoint = getEndPointInterpolate(index, midPoint);\n    const animatedOpacity = {\n      opacity: xOffsetRef.current.interpolate({\n        inputRange: [startPoint, midPoint, endPoint],\n        outputRange: [inActiveOpacity, 1, inActiveOpacity]\n      })\n    };\n    const animatedScale = {\n      transform: [\n        {\n          scale: xOffsetRef.current.interpolate({\n            inputRange: [startPoint, midPoint, endPoint],\n            outputRange: [inActiveScale, 1, inActiveScale]\n          })\n        }\n      ]\n    };\n    return { ...animatedOpacity, ...animatedScale };\n  }\n\n  function getItemMarginStyle(index) {\n    const marginSingleItemSide = itemTotalMarginBothSide / 2;\n    if (isFirstItem(index)) {\n      return !!inverted\n        ? { marginLeft: marginSingleItemSide }\n        : { marginRight: marginSingleItemSide };\n    }\n    if (isLastItem(index)) {\n      return !!inverted\n        ? { marginRight: marginSingleItemSide }\n        : { marginLeft: marginSingleItemSide };\n    }\n    return { marginHorizontal: marginSingleItemSide };\n  }\n\n  function renderItemContainer({ item, index }) {\n    return (\n      <Animated.View\n        pointerEvents={'box-none'}\n        style={[\n          styles.itemContainer,\n          itemContainerStyle,\n          { width: itemWidth },\n          getItemMarginStyle(index),\n          getItemAnimatedStyle(index)\n        ]}\n      >\n        {renderItem({ item, index })}\n      </Animated.View>\n    );\n  }\n\n  return (\n    <AnimatedFlatList\n      {...otherProps}\n      ref={scrollViewRef}\n      data={data}\n      style={containerStyle}\n      horizontal={true}\n      inverted={inverted}\n      bounces={bounces}\n      decelerationRate={0}\n      initialScrollIndex={initialIndex}\n      automaticallyAdjustContentInsets={false}\n      showsHorizontalScrollIndicator={showsHorizontalScrollIndicator}\n      onScroll={handleOnScrollRef.current}\n      keyExtractor={keyExtractor}\n      getItemLayout={getItemLayout}\n      renderItem={renderItemContainer}\n      onScrollBeginDrag={handleOnScrollBeginDrag}\n      onScrollEndDrag={handleOnScrollEndDrag}\n    />\n  );\n}\n\nexport default forwardRef(Carousel);\n"]},"metadata":{},"sourceType":"module"}