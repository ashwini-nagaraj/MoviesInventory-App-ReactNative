{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from \"axios\";\nexport var GET_MOVIES = 'GET_MOVIES';\nexport var GET_MOVIE_DETAILS = 'GET_MOVIE_DETAILS';\nvar BASE_URL_ENDPOINT = \"https://www.omdbapi.com?apikey=5fb20880\";\nexport var getMovies = function getMovies(movieName) {\n  try {\n    return function _callee(dispatch) {\n      var results, movies, pages, i, res, _i;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              results = [];\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(axios.get(BASE_URL_ENDPOINT + \"&s=\" + movieName + \"&page=1\"));\n\n            case 3:\n              movies = _context.sent;\n              pages = movies.data.totalResults;\n              i = 1;\n\n            case 6:\n              if (!(i < pages / 10)) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(axios.get(BASE_URL_ENDPOINT + \"&s=\" + movieName + \"&page=\" + i));\n\n            case 9:\n              res = _context.sent;\n\n              for (_i = 1; _i < 10; _i++) {\n                results.push(res.data.Search[_i]);\n              }\n\n            case 11:\n              i++;\n              _context.next = 6;\n              break;\n\n            case 14:\n              if (results) {\n                dispatch({\n                  type: GET_MOVIES,\n                  payload: results\n                });\n              } else {\n                console.log('Unable to fetch');\n              }\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport var getMovieDetails = function getMovieDetails(movieID) {\n  try {\n    return function _callee2(dispatch) {\n      var movieDetails;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(axios.get(BASE_URL_ENDPOINT + \"&i=\" + movieID));\n\n            case 2:\n              movieDetails = _context2.sent;\n\n              if (movieDetails.data) {\n                dispatch({\n                  type: GET_MOVIE_DETAILS,\n                  payload: movieDetails.data\n                });\n              } else {\n                console.log('Unable to fetch');\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"sources":["/Users/ashwininagaraj/MoviesInventory/redux/actions.js"],"names":["axios","GET_MOVIES","GET_MOVIE_DETAILS","BASE_URL_ENDPOINT","getMovies","movieName","dispatch","results","get","movies","pages","data","totalResults","i","res","push","Search","type","payload","console","log","error","getMovieDetails","movieID","movieDetails"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,IAAMC,UAAU,GAAG,YAAnB;AACP,OAAO,IAAMC,iBAAiB,GAAG,mBAA1B;AAEP,IAAMC,iBAAiB,GAAG,yCAA1B;AAGA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,SAAD,EAAe;AACpC,MAAI;AACF,WAAO,iBAAMC,QAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACDC,cAAAA,OADC,GACQ,EADR;AAAA;AAAA,+CAEUP,KAAK,CAACQ,GAAN,CAAaL,iBAAb,WAAoCE,SAApC,aAFV;;AAAA;AAELI,cAAAA,MAFK;AAGPC,cAAAA,KAHO,GAGAD,MAAM,CAACE,IAAP,CAAYC,YAHZ;AAIHC,cAAAA,CAJG,GAID,CAJC;;AAAA;AAAA,oBAIEA,CAAC,GAACH,KAAK,GAAC,EAJV;AAAA;AAAA;AAAA;;AAAA;AAAA,+CAKSV,KAAK,CAACQ,GAAN,CAAaL,iBAAb,WAAoCE,SAApC,cAAsDQ,CAAtD,CALT;;AAAA;AAKHC,cAAAA,GALG;;AAMT,mBAAQD,EAAR,GAAU,CAAV,EAAaA,EAAC,GAAC,EAAf,EAAmBA,EAAC,EAApB,EAAuB;AACrBN,gBAAAA,OAAO,CAACQ,IAAR,CAAaD,GAAG,CAACH,IAAJ,CAASK,MAAT,CAAgBH,EAAhB,CAAb;AACD;;AARQ;AAIcA,cAAAA,CAAC,EAJf;AAAA;AAAA;;AAAA;AAUL,kBAAIN,OAAJ,EAAa;AACXD,gBAAAA,QAAQ,CAAC;AACPW,kBAAAA,IAAI,EAAEhB,UADC;AAEPiB,kBAAAA,OAAO,EAAEX;AAFF,iBAAD,CAAR;AAID,eALD,MAKO;AACLY,gBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACD;;AAjBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AAmBD,GApBD,CAoBE,OAAOC,KAAP,EAAc;AACdF,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACD;AACF,CAxBI;AA0BL,OAAQ,IAAMC,eAAe,GAAC,SAAhBA,eAAgB,CAACC,OAAD,EAAY;AACxC,MAAI;AACA,WAAO,kBAAMjB,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACsBN,KAAK,CAACQ,GAAN,CAAaL,iBAAb,WAAoCoB,OAApC,CADtB;;AAAA;AACCC,cAAAA,YADD;;AAEL,kBAAIA,YAAY,CAACb,IAAjB,EAAuB;AACrBL,gBAAAA,QAAQ,CAAC;AACPW,kBAAAA,IAAI,EAAEf,iBADC;AAEPgB,kBAAAA,OAAO,EAAEM,YAAY,CAACb;AAFf,iBAAD,CAAR;AAID,eALD,MAKO;AACLQ,gBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACD;;AATI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AAWD,GAZH,CAYI,OAAOC,KAAP,EAAc;AACdF,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACD;AACN,CAhBS","sourcesContent":["import axios from \"axios\";\nexport const GET_MOVIES = 'GET_MOVIES';\nexport const GET_MOVIE_DETAILS = 'GET_MOVIE_DETAILS';\n\nconst BASE_URL_ENDPOINT = \"https://www.omdbapi.com?apikey=5fb20880\";\n\n\nexport const getMovies = (movieName) => {\n    try {\n      return async dispatch => {\n        let results =[];\n  const movies = await axios.get(`${BASE_URL_ENDPOINT}&s=${movieName}&page=1`);\n  let pages= movies.data.totalResults;\n  for(let i=1; i<pages/10; i++){\n    const res = await axios.get(`${BASE_URL_ENDPOINT}&s=${movieName}&page=${i}`);\n    for(let i=1; i<10; i++){\n      results.push(res.data.Search[i])\n    }\n  }\n        if (results) {\n          dispatch({\n            type: GET_MOVIES,\n            payload: results,\n          });\n        } else {\n          console.log('Unable to fetch');\n        }\n      };\n    } catch (error) {\n      console.log(error)\n    }\n  };\n\n  export  const getMovieDetails=(movieID)=> {\n    try {\n        return async dispatch => {\n          const movieDetails = await axios.get(`${BASE_URL_ENDPOINT}&i=${movieID}`);\n          if (movieDetails.data) {\n            dispatch({\n              type: GET_MOVIE_DETAILS,\n              payload: movieDetails.data,\n            });\n          } else {\n            console.log('Unable to fetch');\n          }\n        };\n      } catch (error) {\n        console.log(error)\n      }\n};\n"]},"metadata":{},"sourceType":"module"}