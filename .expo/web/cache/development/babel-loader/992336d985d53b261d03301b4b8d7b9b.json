{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from \"axios\";\nexport var GET_MOVIES = 'GET_MOVIES';\nexport var GET_MOVIE_DETAILS = 'GET_MOVIE_DETAILS';\nvar BASE_URL_ENDPOINT = \"https://www.omdbapi.com?apikey=5fb20880\";\nexport var getMovies = function getMovies(movieName) {\n  try {\n    return function _callee(dispatch) {\n      var i, res, size, _i;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              i = 1;\n\n            case 1:\n              if (!(i <= 30)) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(axios.get(BASE_URL_ENDPOINT + \"&s=\" + movieName + \"&page=\" + i));\n\n            case 4:\n              res = _context.sent;\n              size = Object.keys(res).length;\n\n              for (_i = 1; _i <= size; _i++) {\n                results.push(res.data.Search[_i]);\n              }\n\n            case 7:\n              i++;\n              _context.next = 1;\n              break;\n\n            case 10:\n              if (results) {\n                dispatch({\n                  type: GET_MOVIES,\n                  payload: results\n                });\n              } else {\n                console.log('Unable to fetch');\n              }\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport var getMovieDetails = function getMovieDetails(movieID) {\n  try {\n    return function _callee2(dispatch) {\n      var movieDetails;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(axios.get(BASE_URL_ENDPOINT + \"&i=\" + movieID));\n\n            case 2:\n              movieDetails = _context2.sent;\n\n              if (movieDetails.data) {\n                dispatch({\n                  type: GET_MOVIE_DETAILS,\n                  payload: movieDetails.data\n                });\n              } else {\n                console.log('Unable to fetch');\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"sources":["/Users/ashwininagaraj/MoviesInventory/redux/actions.js"],"names":["axios","GET_MOVIES","GET_MOVIE_DETAILS","BASE_URL_ENDPOINT","getMovies","movieName","dispatch","i","get","res","size","Object","keys","length","results","push","data","Search","type","payload","console","log","error","getMovieDetails","movieID","movieDetails"],"mappings":";AAAI,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,IAAMC,UAAU,GAAG,YAAnB;AACP,OAAO,IAAMC,iBAAiB,GAAG,mBAA1B;AAEP,IAAMC,iBAAiB,GAAG,yCAA1B;AAGA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,SAAD,EAAe;AACpC,MAAI;AACF,WAAO,iBAAMC,QAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAKHC,cAAAA,CALG,GAKD,CALC;;AAAA;AAAA,oBAKEA,CAAC,IAAE,EALL;AAAA;AAAA;AAAA;;AAAA;AAAA,+CAMSP,KAAK,CAACQ,GAAN,CAAaL,iBAAb,WAAoCE,SAApC,cAAsDE,CAAtD,CANT;;AAAA;AAMHE,cAAAA,GANG;AAOLC,cAAAA,IAPK,GAOEC,MAAM,CAACC,IAAP,CAAYH,GAAZ,EAAiBI,MAPnB;;AAQT,mBAAQN,EAAR,GAAU,CAAV,EAAaA,EAAC,IAAEG,IAAhB,EAAsBH,EAAC,EAAvB,EAA0B;AACxBO,gBAAAA,OAAO,CAACC,IAAR,CAAaN,GAAG,CAACO,IAAJ,CAASC,MAAT,CAAgBV,EAAhB,CAAb;AACD;;AAVQ;AAKSA,cAAAA,CAAC,EALV;AAAA;AAAA;;AAAA;AAYL,kBAAIO,OAAJ,EAAa;AACXR,gBAAAA,QAAQ,CAAC;AACPY,kBAAAA,IAAI,EAAEjB,UADC;AAEPkB,kBAAAA,OAAO,EAAEL;AAFF,iBAAD,CAAR;AAID,eALD,MAKO;AACLM,gBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACD;;AAnBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AAqBD,GAtBD,CAsBE,OAAOC,KAAP,EAAc;AACdF,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACD;AACF,CA1BI;AA4BL,OAAQ,IAAMC,eAAe,GAAC,SAAhBA,eAAgB,CAACC,OAAD,EAAY;AACxC,MAAI;AACA,WAAO,kBAAMlB,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACsBN,KAAK,CAACQ,GAAN,CAAaL,iBAAb,WAAoCqB,OAApC,CADtB;;AAAA;AACCC,cAAAA,YADD;;AAEL,kBAAIA,YAAY,CAACT,IAAjB,EAAuB;AACrBV,gBAAAA,QAAQ,CAAC;AACPY,kBAAAA,IAAI,EAAEhB,iBADC;AAEPiB,kBAAAA,OAAO,EAAEM,YAAY,CAACT;AAFf,iBAAD,CAAR;AAID,eALD,MAKO;AACLI,gBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACD;;AATI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AAWD,GAZH,CAYI,OAAOC,KAAP,EAAc;AACdF,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACD;AACN,CAhBS","sourcesContent":["    import axios from \"axios\";\n    export const GET_MOVIES = 'GET_MOVIES';\n    export const GET_MOVIE_DETAILS = 'GET_MOVIE_DETAILS';\n\n    const BASE_URL_ENDPOINT = \"https://www.omdbapi.com?apikey=5fb20880\";\n\n\n    export const getMovies = (movieName) => {\n        try {\n          return async dispatch => {\n          //let results =[];\n          // const movies = await axios.get(`${BASE_URL_ENDPOINT}&s=${movieName}&page=1`);\n          // let pages= movies.data.totalResults;\n         //to limit to top 50 movies\n      for(let i=1; i<=30; i++){\n        const res = await axios.get(`${BASE_URL_ENDPOINT}&s=${movieName}&page=${i}`);\n        let size = Object.keys(res).length\n        for(let i=1; i<=size; i++){\n          results.push(res.data.Search[i])\n        }\n      }\n            if (results) {\n              dispatch({\n                type: GET_MOVIES,\n                payload: results,\n              });\n            } else {\n              console.log('Unable to fetch');\n            }\n          };\n        } catch (error) {\n          console.log(error)\n        }\n      };\n\n      export  const getMovieDetails=(movieID)=> {\n        try {\n            return async dispatch => {\n              const movieDetails = await axios.get(`${BASE_URL_ENDPOINT}&i=${movieID}`);\n              if (movieDetails.data) {\n                dispatch({\n                  type: GET_MOVIE_DETAILS,\n                  payload: movieDetails.data,\n                });\n              } else {\n                console.log('Unable to fetch');\n              }\n            };\n          } catch (error) {\n            console.log(error)\n          }\n    };\n\n"]},"metadata":{},"sourceType":"module"}